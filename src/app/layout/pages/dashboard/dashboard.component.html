<div class="dashboard-grid">
  <!-- ====== CONTE√öDO PRINCIPAL ====== -->
  <div class="dashboard-main">
    <header class="dashboard-header">
      <div class="header-left">
        <h2>Ol√°, {{ authService.currentUserValue?.name }}</h2>
        <p>Bem-vindo ao seu painel de controle</p>
      </div>

      <!-- ‚úÖ Bot√£o Ticket R√°pido no topo -->
      <button class="btn btn-quick" (click)="openQuickTicket()">
        <i class="fas fa-bolt"></i> Ticket R√°pido
      </button>
    </header>

    <!-- ====== CARDS DE STATUS ====== -->
    <section class="stats-cards">
      <div class="card card-blue">
        <div class="card-header">
          <i class="fas fa-ticket-alt"></i>
          <span>Meus Tickets</span>
        </div>
        <div class="card-body">
          <p>Pendentes</p>
          <strong>0</strong>
        </div>
      </div>

      <div class="card card-green">
        <div class="card-header">
          <i class="fas fa-users"></i>
          <span>Tickets da Equipe</span>
        </div>
        <div class="card-body">
          <p>Abertos</p>
          <strong>0</strong>
        </div>
      </div>

      <div class="card card-purple">
        <div class="card-header">
          <i class="fas fa-comments"></i>
          <span>Chat</span>
        </div>
        <div class="card-body">
          <div>
            <p>Pendentes</p>
            <strong>3</strong>
          </div>
          <div>
            <p>Em Atendimento</p>
            <strong>0</strong>
          </div>
        </div>
      </div>
    </section>

    <!-- ====== FEED DE POSTAGENS ====== -->
    <section class="feed">
      <div class="feed-header">
        <h4><i class="fas fa-rss"></i> Feed de Postagens</h4>

        <!-- Bot√£o Nova Postagem dentro do feed -->
        <button class="btn btn-primary" *ngIf="isMaster() || isAdmin() || isSupervisor()">
          <i class="fas fa-plus"></i> Nova Postagem
        </button>
      </div>

      <!-- Campo de cria√ß√£o de postagem -->
      <div class="create-post" *ngIf="isMaster() || isAdmin() || isSupervisor()">
        <textarea placeholder="Nova Postagem "></textarea>
        <div class="post-actions">
          <label class="upload-btn">
            <i class="fas fa-image"></i> Adicionar imagem
            <input type="file" accept="image/*" hidden />
          </label>
          <button class="btn btn-submit">
            <i class="fas fa-paper-plane"></i> Publicar
          </button>
        </div>
      </div>

      <!-- Postagem existente -->
      <div class="post-card">
        <div class="post-header">
          <img src="/assets/avatar-default.png" alt="Avatar" class="avatar-small" />
          <div class="post-info">
            <strong>Leane Brand√£o</strong>
            <span>RH ‚Ä¢ 2h</span>
          </div>
          <button class="btn-icon"><i class="fas fa-ellipsis-h"></i></button>
        </div>

        <div class="post-body">
          <p>
            <strong>Atualiza√ß√£o de Dados Cadastrais:</strong> üìÖ
            Lembrete: o prazo para a atualiza√ß√£o de dados cadastrais termina nesta sexta-feira.
          </p>
          <img src="/assets/exemplo-imagem.jpg" alt="Aviso interno" class="post-image" />
        </div>
      </div>
    </section>
  </div>

  <!-- ====== SIDEBAR DIREITA ====== -->
  <aside class="dashboard-aside">
    <section class="widget">
      <h4><i class="fas fa-gift"></i> Aniversariantes do M√™s</h4>
      <div class="birthday-item">
        <img src="/assets/avatar-default.png" alt="Avatar" class="avatar" />
        <div>
          <strong>Jo√£o Victor</strong>
          <span>Suporte</span>
        </div>
        <button class="btn btn-secondary">Parabenizar</button>
      </div>
    </section>

    <section class="widget">
      <div class="widget-header">
        <h4><i class="fas fa-user-friends"></i> Colegas Dispon√≠veis</h4>
        <select>
          <option>Suporte</option>
          <option>Financeiro</option>
        </select>
      </div>

      <div class="colleague-list">
        <div class="colleague-item">
          <img src="/assets/avatar-default.png" alt="Avatar" class="avatar-small" />
          <div>
            <strong>Marcos</strong>
            <span>Analista de Suporte N3</span>
          </div>
          <button class="btn btn-secondary">Chat</button>
        </div>

        <div class="colleague-item">
          <img src="/assets/avatar-default.png" alt="Avatar" class="avatar-small" />
          <div>
            <strong>Agente 2</strong>
            <span>Coordenador de Suporte</span>
          </div>
          <button class="btn btn-primary">Chat</button>
        </div>
      </div>
    </section>
  </aside>
</div>

<!-- ====== MODAL DE TICKET R√ÅPIDO ====== -->
<div class="modal-backdrop" *ngIf="showQuickTicket">
  <div class="quick-ticket-modal">
    <div class="modal-header">
      <h3><i class="fas fa-ticket-alt"></i> Novo Ticket R√°pido</h3>
      <button class="close-btn" (click)="closeQuickTicket()">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <form [formGroup]="quickTicketForm" (ngSubmit)="submitQuickTicket()">
      <label>
        <span>T√≠tulo da Demanda</span>
        <input formControlName="title" type="text" placeholder="Ex: Falha no sistema de login" />
      </label>

      <label>
        <span>Descri√ß√£o</span>
        <textarea formControlName="description" rows="4" placeholder="Explique o problema..."></textarea>
      </label>

      <label>
        <span>Anexo (opcional)</span>
        <input type="file" (change)="onFileSelected($event)" />
      </label>

      <label>
        <span>Grau de Urg√™ncia</span>
        <select formControlName="priority">
          <option value="">Selecione...</option>
          <option value="Low">Pouco Urgente</option>
          <option value="Medium">Urgente</option>
          <option value="High">Cr√≠tico</option>
        </select>
      </label>

      <label>
        <span>Respons√°vel / Grupo</span>
        <select formControlName="assignedTo">
          <option value="">Selecione...</option>
          <option *ngFor="let user of users" [value]="user.id">{{ user.name }}</option>
        </select>
      </label>

      <div class="actions">
        <button type="button" class="cancel" (click)="closeQuickTicket()">Cancelar</button>
        <button type="submit" class="save" [disabled]="isSubmitting">
          <i class="fas fa-save"></i> Salvar Ticket
        </button>
      </div>
    </form>
  </div>
</div>
